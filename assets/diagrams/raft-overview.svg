<svg xmlns="http://www.w3.org/2000/svg" width="900" height="420" viewBox="0 0 900 420">
  <style>
    .box { fill: #eef2ff; stroke: #6366f1; stroke-width: 2; }
    .leader { fill: #dcfce7; stroke: #16a34a; stroke-width: 2; }
    .text { font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif; font-size: 14px; fill: #0f172a; }
    .small { font-size: 12px; fill: #475569; }
    .arrow { stroke: #334155; stroke-width: 2; marker-end: url(#arrowhead); }
    .hb { stroke: #94a3b8; stroke-dasharray: 5 5; marker-end: url(#arrowhead); }
    .title { font-size: 18px; font-weight: 600; }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="8" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#334155"/>
    </marker>
  </defs>

  <text x="20" y="30" class="title text">Raft Overview: Leader Election & Log Replication</text>

  <!-- Clients -->
  <rect x="20" y="70" width="150" height="60" class="box"/>
  <text x="45" y="105" class="text">Clients</text>

  <!-- Leader -->
  <rect x="230" y="60" width="170" height="80" rx="6" class="leader"/>
  <text x="260" y="85" class="text">Leader</text>
  <text x="243" y="105" class="small">accepts writes, replicates log</text>

  <!-- Followers -->
  <rect x="430" y="60" width="170" height="80" rx="6" class="box"/>
  <text x="455" y="85" class="text">Follower A</text>
  <text x="445" y="105" class="small">responds to AppendEntries</text>

  <rect x="630" y="60" width="170" height="80" rx="6" class="box"/>
  <text x="655" y="85" class="text">Follower B</text>
  <text x="645" y="105" class="small">responds to AppendEntries</text>

  <!-- Client -> Leader -->
  <line x1="170" y1="100" x2="230" y2="100" class="arrow"/>
  <text x="175" y="90" class="small">command</text>

  <!-- Leader -> Followers (AppendEntries) -->
  <line x1="400" y1="100" x2="430" y2="100" class="arrow"/>
  <text x="395" y="90" class="small">AppendEntries</text>

  <line x1="600" y1="100" x2="630" y2="100" class="arrow"/>
  <text x="595" y="90" class="small">AppendEntries</text>

  <!-- Heartbeats -->
  <line x1="315" y1="148" x2="315" y2="200" class="hb"/>
  <line x1="515" y1="148" x2="515" y2="200" class="hb"/>
  <line x1="715" y1="148" x2="715" y2="200" class="hb"/>
  <text x="20" y="195" class="small">Periodic heartbeats keep followers from timing out</text>

  <!-- Log timeline -->
  <text x="20" y="240" class="text">Replicated Log (indices)</text>
  <!-- Leader log -->
  <rect x="230" y="260" width="40" height="40" rx="4" class="leader"/><text x="242" y="285" class="small">1</text>
  <rect x="275" y="260" width="40" height="40" rx="4" class="leader"/><text x="287" y="285" class="small">2</text>
  <rect x="320" y="260" width="40" height="40" rx="4" class="leader"/><text x="332" y="285" class="small">3</text>
  <rect x="365" y="260" width="40" height="40" rx="4" class="leader"/><text x="377" y="285" class="small">4</text>
  <text x="265" y="250" class="small">Leader</text>

  <!-- Follower A log -->
  <rect x="430" y="260" width="40" height="40" rx="4" class="box"/><text x="442" y="285" class="small">1</text>
  <rect x="475" y="260" width="40" height="40" rx="4" class="box"/><text x="487" y="285" class="small">2</text>
  <rect x="520" y="260" width="40" height="40" rx="4" class="box"/><text x="532" y="285" class="small">3</text>
  <rect x="565" y="260" width="40" height="40" rx="4" class="box"/><text x="577" y="285" class="small">4</text>
  <text x="465" y="250" class="small">Follower A</text>

  <!-- Follower B log (lagging) -->
  <rect x="630" y="260" width="40" height="40" rx="4" class="box"/><text x="642" y="285" class="small">1</text>
  <rect x="675" y="260" width="40" height="40" rx="4" class="box"/><text x="687" y="285" class="small">2</text>
  <rect x="720" y="260" width="40" height="40" rx="4" class="box"/><text x="732" y="285" class="small">3</text>
  <text x="665" y="250" class="small">Follower B</text>

  <!-- Commit index -->
  <line x1="230" y1="315" x2="605" y2="315" stroke="#16a34a" stroke-width="3"/>
  <text x="20" y="320" class="small">commitIndex advanced when majority stores entry from current term</text>

  <!-- Notes -->
  <text x="20" y="360" class="small">Election: randomized timeouts avoid split vote. Safety: leader completeness guarantees committed entries are preserved.</text>
</svg>
